(()=>{"use strict";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const o=new Uint8Array(16);function d(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(o)}const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));const n=function(e,o,n){if(t.randomUUID&&!o&&!e)return t.randomUUID();const i=(e=e||{}).random||(e.rng||d)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,o){n=n||0;for(let t=0;t<16;++t)o[n+t]=i[t];return o}return function(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}(i)},i=document.querySelector("[data-todo-form]"),r=document.querySelector("[data-todo-input]"),l=document.querySelector("[data-todo-form-button]"),a=document.querySelector("[data-total-todos]"),c=document.querySelector("[data-completed-todos]"),u=document.querySelector(".not-found"),h=document.querySelector(".todo-container"),p=new class{constructor(){const t=localStorage.getItem("typed-todos");null===t?this.todos=[]:(this.todos=JSON.parse(t),this.updateTodoHeader(),this.renderAllTodos()),this.editMode=!1,this.editIds=[],this.editId=null}addNewTodo(t){const e={id:n(),title:t,completed:!1};console.log("New Todo",e),this.todos.push(e),r.value="",this.renderTodo(e),this.updateTodoHeader(),localStorage.setItem("typed-todos",JSON.stringify(this.todos))}createTodoElement(t){const e=document.createElement("div");e.classList.add("todo");const o=document.createElement("p");o.innerText=t.title;const d=document.createElement("div");d.classList.add("todo-btn-container");const s=document.createElement("button");s.innerText="✅";const n=document.createElement("button");n.innerText="✏️";const i=document.createElement("button");return i.innerText="🗑️",d.appendChild(s),d.appendChild(n),d.appendChild(i),s.addEventListener("click",(()=>this.handleCompleted(t,e))),n.addEventListener("click",(()=>this.handleEdit(t))),i.addEventListener("click",(()=>this.handleDelete(t.id))),e.appendChild(o),e.appendChild(d),e}renderTodo(t){1===this.todos.length&&(null==u||u.classList.remove("active"));const e=this.createTodoElement(t);h.appendChild(e)}renderAllTodos(){null==u||u.classList.remove("active"),h.innerHTML="",this.todos.forEach((t=>{const e=this.createTodoElement(t);t.completed&&e.classList.add("completed"),h.appendChild(e)}))}updateTodoHeader(){a.innerText=this.todos.length.toString();let t=0;this.todos.forEach((e=>{e.completed&&t++})),c.innerText=t.toString()}handleCompleted(t,e){this.todos=this.todos.map((o=>o.id===t.id?(o.completed?e.classList.remove("completed"):e.classList.add("completed"),Object.assign(Object.assign({},o),{completed:!o.completed})):o)),localStorage.setItem("typed-todos",JSON.stringify(this.todos)),this.updateTodoHeader()}handleEdit(t){0!==this.editIds.length&&this.editIds.includes(t.id)?(this.editMode=!1,this.editIds=this.editIds.filter((e=>e!==t.id)),this.editId=null,r.value="",r.placeholder="Add Your Todo ...",l.innerText="Add"):(this.editMode=!0,this.editIds.push(t.id),this.editId=t.id,r.value=t.title,r.placeholder="Edit Your Todo ...",l.innerText="Edit")}updateTodo(t){this.todos=this.todos.map((e=>e.id===this.editId?Object.assign(Object.assign({},e),{title:t}):e)),this.renderAllTodos(),r.value="",r.placeholder="Add Your Todo ...",l.innerText="Add",this.editMode=!1,this.editIds=[],this.editId=null,localStorage.setItem("typed-todos",JSON.stringify(this.todos))}handleDelete(t){this.todos=this.todos.filter((e=>e.id!==t)),localStorage.setItem("typed-todos",JSON.stringify(this.todos)),this.renderAllTodos(),this.updateTodoHeader()}};null==i||i.addEventListener("submit",(t=>{t.preventDefault();const e=r.value;""!==e.trim()&&(p.editMode?p.updateTodo(e):p.addNewTodo(e))}))})();